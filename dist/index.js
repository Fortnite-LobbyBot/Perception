// @bun
var L;((e)=>{e[e.Public=0]="Public",e[e.Private=1]="Private"})(L||={});var h;((e)=>{e[e.Offline=0]="Offline",e[e.Booting=1]="Booting",e[e.Available=2]="Available",e[e.Busy=3]="Busy",e[e.Disconnected=4]="Disconnected"})(h||={});var f;((e)=>{e.Win="WIN",e.Mac="MAC",e.Psn="PSN",e.Xbl="XBL",e.Swt="SWT",e.Ios="IOS",e.And="AND",e.Ps5="PS5",e.Xsx="XSX"})(f||={});var O;((e)=>{e[e.Public=0]="Public",e[e.Private=1]="Private"})(O||={});var b;((e)=>{e[e.Equals=0]="Equals",e[e.Includes=1]="Includes",e[e.StartsWith=2]="StartsWith",e[e.EndsWith=3]="EndsWith"})(b||={});var m;((e)=>{e[e.ChatBan=0]="ChatBan",e[e.Kick=1]="Kick",e[e.Block=2]="Block",e[e.RemoveFriend=3]="RemoveFriend",e[e.AddFriend=4]="AddFriend",e[e.Promote=5]="Promote",e[e.Copy=6]="Copy",e[e.Mimic=7]="Mimic",e[e.Hide=8]="Hide",e[e.Show=9]="Show",e[e.Blacklist=10]="Blacklist",e[e.Whitelist=11]="Whitelist"})(m||={});var s;((e)=>{e.Default="en",e.De="de",e.Es="es",e.Fr="fr",e.It="it",e.Pl="pl",e.Pt="pt",e.Tr="tr"})(s||={});class l{lockPromise;constructor(){this.lockPromise=void 0}get isLocked(){return!!this.lockPromise}wait(){return this.lockPromise?.promise||Promise.resolve()}lock(){let e;const t=new Promise((o)=>{e=o});this.lockPromise={promise:t,resolve:e}}unlock(){this.lockPromise?.resolve(),this.lockPromise=void 0}}class a{moduleObject;locale;options;constructor(e,t,o){this.moduleObject=e,this.locale=t,this.options=o}translate(e,t){const o=this.moduleObject?.[e];if(!o)console.error(`TRANSLATION_ERROR: LOCALE "${this.locale}" KEY "${e}" MODULE "${this.options.module}"`);return o?.replace(/{(.*?)}/gi,(i,c)=>{return t?.[c]??""})??`TRANSLATION_ERROR: LOCALE "${this.locale}" KEY "${e}" MODULE "${this.options.module}"`}}class n{localeObject;locale;constructor(e,t){this.localeObject=e,this.locale=t}createTranslator(e){return new a(this.localeObject?.[e.module],this.locale,e)}}var y="https://cdn.fnlb.net";class C{scope;contextCache={};loadCache={};constructor(e){this.scope=e}async getContext(e,t){const o=`${e}/${t}.json`,i=this.contextCache[o];if(i)return i;const c=this.loadCache[o];if(!c){const r=new l;r.lock(),this.loadCache[o]=r;const p=await fetch(`${y}/locales/${this.scope}/${o}`).then((d)=>d.json().catch(()=>null)).catch(()=>null);if(!p)return;const u=new n(p,t);return this.contextCache[o]=u,r.unlock(),u}if(c?.isLocked)await c.wait();return this.contextCache[o]}static transformToSupportedLocale(e){if(typeof e!=="string")return s.Default;const t=e.split("-")[0]?.toLowerCase();if(Object.values(s).includes(t))return t;return s.Default}}export{a as LocaleTranslator,n as LocaleContext,C as LocaleClient};
