var Q;(function(Y){Y["Default"]="en";Y["De"]="de";Y["Es"]="es";Y["Fr"]="fr";Y["It"]="it";Y["Pl"]="pl";Y["Pt"]="pt";Y["Tr"]="tr"})(Q||(Q={}));class z extends Error{constructor(x,$,C){const N=x.status||x.status===0?x.status:"",b=x.statusText||"",h=`${N} ${b}`.trim(),F=h?`status code ${h}`:"an unknown error";super(`Request failed with ${F}: ${$.method} ${$.url}`);Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="HTTPError",this.response=x,this.request=$,this.options=C}}class W extends Error{constructor(x){super(`Request timed out: ${x.method} ${x.url}`);Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.request=x}}var X=(x)=>x!==null&&typeof x==="object";var Z=(...x)=>{for(let $ of x)if((!X($)||Array.isArray($))&&$!==void 0)throw new TypeError("The `options` argument must be an object");return I({},...x)},E=(x={},$={})=>{const C=new globalThis.Headers(x),N=$ instanceof globalThis.Headers,b=new globalThis.Headers($);for(let[h,F]of b.entries())if(N&&F==="undefined"||F===void 0)C.delete(h);else C.set(h,F);return C},I=(...x)=>{let $={},C={};for(let N of x)if(Array.isArray(N)){if(!Array.isArray($))$=[];$=[...$,...N]}else if(X(N)){for(let[b,h]of Object.entries(N)){if(X(h)&&b in $)h=I($[b],h);$={...$,[b]:h}}if(X(N.headers))C=E(C,N.headers),$.headers=C}return $};var U=(()=>{let x=!1,$=!1;const C=typeof globalThis.ReadableStream==="function",N=typeof globalThis.Request==="function";if(C&&N)try{$=new globalThis.Request("https://empty.invalid",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type")}catch(b){if(b instanceof Error&&b.message==="unsupported BodyInit type")return!1;throw b}return x&&!$})(),V=typeof globalThis.AbortController==="function",D=typeof globalThis.ReadableStream==="function",P=typeof globalThis.FormData==="function",K=["get","post","put","patch","head","delete"],g=()=>{return};g();var w={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},O=2147483647,S=Symbol("stop"),v={json:!0,parseJson:!0,stringifyJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,fetch:!0},R={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,dispatcher:!0,duplex:!0,priority:!0};var M=(x)=>K.includes(x)?x.toUpperCase():x,k=["get","put","head","delete","options","trace"],m=[408,413,429,500,502,503,504],f=[413,429,503],T={limit:2,methods:k,statusCodes:m,afterStatusCodes:f,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY,delay:(x)=>0.3*2**(x-1)*1000},c=(x={})=>{if(typeof x==="number")return{...T,limit:x};if(x.methods&&!Array.isArray(x.methods))throw new Error("retry.methods must be an array");if(x.statusCodes&&!Array.isArray(x.statusCodes))throw new Error("retry.statusCodes must be an array");return{...T,...x,afterStatusCodes:f}};async function B(x,$,C,N){return new Promise((b,h)=>{const F=setTimeout(()=>{if(C)C.abort();h(new W(x))},N.timeout);N.fetch(x,$).then(b).catch(h).then(()=>{clearTimeout(F)})})}async function A(x,{signal:$}){return new Promise((C,N)=>{if($)$.throwIfAborted(),$.addEventListener("abort",b,{once:!0});function b(){clearTimeout(h),N($.reason)}const h=setTimeout(()=>{$?.removeEventListener("abort",b),C()},x)})}var j=(x,$)=>{const C={};for(let N in $)if(!(N in R)&&!(N in v)&&!(N in x))C[N]=$[N];return C};class _{static create(x,$){const C=new _(x,$),N=async()=>{if(typeof C._options.timeout==="number"&&C._options.timeout>O)throw new RangeError(`The \`timeout\` option cannot be greater than ${O}`);await Promise.resolve();let F=await C._fetch();for(let G of C._options.hooks.afterResponse){const Y=await G(C.request,C._options,C._decorateResponse(F.clone()));if(Y instanceof globalThis.Response)F=Y}if(C._decorateResponse(F),!F.ok&&C._options.throwHttpErrors){let G=new z(F,C.request,C._options);for(let Y of C._options.hooks.beforeError)G=await Y(G);throw G}if(C._options.onDownloadProgress){if(typeof C._options.onDownloadProgress!=="function")throw new TypeError("The `onDownloadProgress` option must be a function");if(!D)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return C._stream(F.clone(),C._options.onDownloadProgress)}return F},h=C._options.retry.methods.includes(C.request.method.toLowerCase())?C._retry(N):N();for(let[F,G]of Object.entries(w))h[F]=async()=>{C.request.headers.set("accept",C.request.headers.get("accept")||G);const J=(await h).clone();if(F==="json"){if(J.status===204)return"";if((await J.clone().arrayBuffer()).byteLength===0)return"";if($.parseJson)return $.parseJson(await J.text())}return J[F]()};return h}constructor(x,$={}){Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"abortController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_retryCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._input=x;const C=this._input instanceof Request&&"credentials"in Request.prototype?this._input.credentials:void 0;if(this._options={...C&&{credentials:C},...$,headers:E(this._input.headers,$.headers),hooks:I({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},$.hooks),method:M($.method??this._input.method),prefixUrl:String($.prefixUrl||""),retry:c($.retry),throwHttpErrors:$.throwHttpErrors!==!1,timeout:$.timeout??1e4,fetch:$.fetch??globalThis.fetch.bind(globalThis)},typeof this._input!=="string"&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&typeof this._input==="string"){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");if(!this._options.prefixUrl.endsWith("/"))this._options.prefixUrl+="/";this._input=this._options.prefixUrl+this._input}if(V){if(this.abortController=new globalThis.AbortController,this._options.signal){const N=this._options.signal;this._options.signal.addEventListener("abort",()=>{this.abortController.abort(N.reason)})}this._options.signal=this.abortController.signal}if(U)this._options.duplex="half";if(this._options.json!==void 0)this._options.body=this._options.stringifyJson?.(this._options.json)??JSON.stringify(this._options.json),this._options.headers.set("content-type",this._options.headers.get("content-type")??"application/json");if(this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const b="?"+(typeof this._options.searchParams==="string"?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),h=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,b);if((P&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)&&!(this._options.headers&&this._options.headers["content-type"]))this.request.headers.delete("content-type");this.request=new globalThis.Request(new globalThis.Request(h,{...this.request}),this._options)}}_calculateRetryDelay(x){if(this._retryCount++,this._retryCount<=this._options.retry.limit&&!(x instanceof W)){if(x instanceof z){if(!this._options.retry.statusCodes.includes(x.response.status))return 0;const C=x.response.headers.get("Retry-After");if(C&&this._options.retry.afterStatusCodes.includes(x.response.status)){let N=Number(C)*1000;if(Number.isNaN(N))N=Date.parse(C)-Date.now();const b=this._options.retry.maxRetryAfter??N;return N<b?N:b}if(x.response.status===413)return 0}const $=this._options.retry.delay(this._retryCount);return Math.min(this._options.retry.backoffLimit,$)}return 0}_decorateResponse(x){if(this._options.parseJson)x.json=async()=>this._options.parseJson(await x.text());return x}async _retry(x){try{return await x()}catch($){const C=Math.min(this._calculateRetryDelay($),O);if(C!==0&&this._retryCount>0){await A(C,{signal:this._options.signal});for(let N of this._options.hooks.beforeRetry)if(await N({request:this.request,options:this._options,error:$,retryCount:this._retryCount})===S)return;return this._retry(x)}throw $}}async _fetch(){for(let C of this._options.hooks.beforeRequest){const N=await C(this.request,this._options);if(N instanceof Request){this.request=N;break}if(N instanceof Response)return N}const x=j(this.request,this._options),$=this.request;if(this.request=$.clone(),this._options.timeout===!1)return this._options.fetch($,x);return B($,x,this.abortController,this._options)}_stream(x,$){const C=Number(x.headers.get("content-length"))||0;let N=0;if(x.status===204){if($)$({percent:1,totalBytes:C,transferredBytes:N},new Uint8Array);return new globalThis.Response(null,{status:x.status,statusText:x.statusText,headers:x.headers})}return new globalThis.Response(new globalThis.ReadableStream({async start(b){const h=x.body.getReader();if($)$({percent:0,transferredBytes:0,totalBytes:C},new Uint8Array);async function F(){const{done:G,value:Y}=await h.read();if(G){b.close();return}if($){N+=Y.byteLength;const J=C===0?0:N/C;$({percent:J,transferredBytes:N,totalBytes:C},Y)}b.enqueue(Y),await F()}await F()}}),{status:x.status,statusText:x.statusText,headers:x.headers})}}/*! MIT License Â© Sindre Sorhus */var H=(x)=>{const $=(C,N)=>_.create(C,Z(x,N));for(let C of K)$[C]=(N,b)=>_.create(N,Z(x,b,{method:C}));return $.create=(C)=>H(Z(C)),$.extend=(C)=>H(Z(x,C)),$.stop=S,$},d=H(),q=d;var l="https://cdn.fnlb.net";class L{localeClient;route;localeObject;constructor(x,$){this.localeClient=x,this.route=$}async load(){if(!this.localeObject)this.localeObject=await q.get(`${l}/locales/${this.localeClient.scope}/${this.route}`).json()}translate(x,$){return this.localeObject?.[x]?.replace(/{(.*?)}/gi,(N,b)=>{return $?.[b]??""})??`TRANSLATION_ERROR: KEY "${x}"`}}class y{scope;contextCache={};constructor(x){this.scope=x}getContext(x){const $=this.contextCache[x];if($)return $;const C=new L(this,x);return this.contextCache[x]=C,C}static transformToSupportedLocale(x){if(typeof x!=="string")return Q.Default;if(Object.values(Q).includes(x))return x;return Q.Default}}export{y as LocaleClient};
