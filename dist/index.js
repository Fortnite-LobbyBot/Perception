var Y;(function(O){O["Default"]="en";O["De"]="de";O["Es"]="es";O["Fr"]="fr";O["It"]="it";O["Pl"]="pl";O["Pt"]="pt";O["Tr"]="tr"})(Y||(Y={}));class X extends Error{constructor(c,b,h){const L=c.status||c.status===0?c.status:"",x=c.statusText||"",$=`${L} ${x}`.trim(),C=$?`status code ${$}`:"an unknown error";super(`Request failed with ${C}: ${b.method} ${b.url}`);Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="HTTPError",this.response=c,this.request=b,this.options=h}}class G extends Error{constructor(c){super(`Request timed out: ${c.method} ${c.url}`);Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.request=c}}var J=(c)=>c!==null&&typeof c==="object";var Q=(...c)=>{for(let b of c)if((!J(b)||Array.isArray(b))&&b!==void 0)throw new TypeError("The `options` argument must be an object");return Z({},...c)},P=(c={},b={})=>{const h=new globalThis.Headers(c),L=b instanceof globalThis.Headers,x=new globalThis.Headers(b);for(let[$,C]of x.entries())if(L&&C==="undefined"||C===void 0)h.delete($);else h.set($,C);return h},Z=(...c)=>{let b={},h={};for(let L of c)if(Array.isArray(L)){if(!Array.isArray(b))b=[];b=[...b,...L]}else if(J(L)){for(let[x,$]of Object.entries(L)){if(J($)&&x in b)$=Z(b[x],$);b={...b,[x]:$}}if(J(L.headers))h=P(h,L.headers),b.headers=h}return b};var f=(()=>{let c=!1,b=!1;const h=typeof globalThis.ReadableStream==="function",L=typeof globalThis.Request==="function";if(h&&L)try{b=new globalThis.Request("https://empty.invalid",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return c=!0,"half"}}).headers.has("Content-Type")}catch(x){if(x instanceof Error&&x.message==="unsupported BodyInit type")return!1;throw x}return c&&!b})(),B=typeof globalThis.AbortController==="function",H=typeof globalThis.ReadableStream==="function",U=typeof globalThis.FormData==="function",_=["get","post","put","patch","head","delete"],q=()=>{return};q();var V={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},z=2147483647,I=Symbol("stop"),j={json:!0,parseJson:!0,stringifyJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,fetch:!0},D={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,dispatcher:!0,duplex:!0,priority:!0};var T=(c)=>_.includes(c)?c.toUpperCase():c,i=["get","put","head","delete","options","trace"],g=[408,413,429,500,502,503,504],R=[413,429,503],l={limit:2,methods:i,statusCodes:g,afterStatusCodes:R,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY,delay:(c)=>0.3*2**(c-1)*1000},m=(c={})=>{if(typeof c==="number")return{...l,limit:c};if(c.methods&&!Array.isArray(c.methods))throw new Error("retry.methods must be an array");if(c.statusCodes&&!Array.isArray(c.statusCodes))throw new Error("retry.statusCodes must be an array");return{...l,...c,afterStatusCodes:R}};async function v(c,b,h,L){return new Promise((x,$)=>{const C=setTimeout(()=>{if(h)h.abort();$(new G(c))},L.timeout);L.fetch(c,b).then(x).catch($).then(()=>{clearTimeout(C)})})}async function S(c,{signal:b}){return new Promise((h,L)=>{if(b)b.throwIfAborted(),b.addEventListener("abort",x,{once:!0});function x(){clearTimeout($),L(b.reason)}const $=setTimeout(()=>{b?.removeEventListener("abort",x),h()},c)})}var M=(c,b)=>{const h={};for(let L in b)if(!(L in D)&&!(L in j)&&!(L in c))h[L]=b[L];return h};class W{static create(c,b){const h=new W(c,b),L=async()=>{if(typeof h._options.timeout==="number"&&h._options.timeout>z)throw new RangeError(`The \`timeout\` option cannot be greater than ${z}`);await Promise.resolve();let C=await h._fetch();for(let N of h._options.hooks.afterResponse){const O=await N(h.request,h._options,h._decorateResponse(C.clone()));if(O instanceof globalThis.Response)C=O}if(h._decorateResponse(C),!C.ok&&h._options.throwHttpErrors){let N=new X(C,h.request,h._options);for(let O of h._options.hooks.beforeError)N=await O(N);throw N}if(h._options.onDownloadProgress){if(typeof h._options.onDownloadProgress!=="function")throw new TypeError("The `onDownloadProgress` option must be a function");if(!H)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return h._stream(C.clone(),h._options.onDownloadProgress)}return C},$=h._options.retry.methods.includes(h.request.method.toLowerCase())?h._retry(L):L();for(let[C,N]of Object.entries(V))$[C]=async()=>{h.request.headers.set("accept",h.request.headers.get("accept")||N);const F=(await $).clone();if(C==="json"){if(F.status===204)return"";if((await F.clone().arrayBuffer()).byteLength===0)return"";if(b.parseJson)return b.parseJson(await F.text())}return F[C]()};return $}constructor(c,b={}){Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"abortController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_retryCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._input=c;const h=this._input instanceof Request&&"credentials"in Request.prototype?this._input.credentials:void 0;if(this._options={...h&&{credentials:h},...b,headers:P(this._input.headers,b.headers),hooks:Z({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},b.hooks),method:T(b.method??this._input.method),prefixUrl:String(b.prefixUrl||""),retry:m(b.retry),throwHttpErrors:b.throwHttpErrors!==!1,timeout:b.timeout??1e4,fetch:b.fetch??globalThis.fetch.bind(globalThis)},typeof this._input!=="string"&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&typeof this._input==="string"){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");if(!this._options.prefixUrl.endsWith("/"))this._options.prefixUrl+="/";this._input=this._options.prefixUrl+this._input}if(B){if(this.abortController=new globalThis.AbortController,this._options.signal){const L=this._options.signal;this._options.signal.addEventListener("abort",()=>{this.abortController.abort(L.reason)})}this._options.signal=this.abortController.signal}if(f)this._options.duplex="half";if(this._options.json!==void 0)this._options.body=this._options.stringifyJson?.(this._options.json)??JSON.stringify(this._options.json),this._options.headers.set("content-type",this._options.headers.get("content-type")??"application/json");if(this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const x="?"+(typeof this._options.searchParams==="string"?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),$=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,x);if((U&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)&&!(this._options.headers&&this._options.headers["content-type"]))this.request.headers.delete("content-type");this.request=new globalThis.Request(new globalThis.Request($,{...this.request}),this._options)}}_calculateRetryDelay(c){if(this._retryCount++,this._retryCount<=this._options.retry.limit&&!(c instanceof G)){if(c instanceof X){if(!this._options.retry.statusCodes.includes(c.response.status))return 0;const h=c.response.headers.get("Retry-After");if(h&&this._options.retry.afterStatusCodes.includes(c.response.status)){let L=Number(h)*1000;if(Number.isNaN(L))L=Date.parse(h)-Date.now();const x=this._options.retry.maxRetryAfter??L;return L<x?L:x}if(c.response.status===413)return 0}const b=this._options.retry.delay(this._retryCount);return Math.min(this._options.retry.backoffLimit,b)}return 0}_decorateResponse(c){if(this._options.parseJson)c.json=async()=>this._options.parseJson(await c.text());return c}async _retry(c){try{return await c()}catch(b){const h=Math.min(this._calculateRetryDelay(b),z);if(h!==0&&this._retryCount>0){await S(h,{signal:this._options.signal});for(let L of this._options.hooks.beforeRetry)if(await L({request:this.request,options:this._options,error:b,retryCount:this._retryCount})===I)return;return this._retry(c)}throw b}}async _fetch(){for(let h of this._options.hooks.beforeRequest){const L=await h(this.request,this._options);if(L instanceof Request){this.request=L;break}if(L instanceof Response)return L}const c=M(this.request,this._options),b=this.request;if(this.request=b.clone(),this._options.timeout===!1)return this._options.fetch(b,c);return v(b,c,this.abortController,this._options)}_stream(c,b){const h=Number(c.headers.get("content-length"))||0;let L=0;if(c.status===204){if(b)b({percent:1,totalBytes:h,transferredBytes:L},new Uint8Array);return new globalThis.Response(null,{status:c.status,statusText:c.statusText,headers:c.headers})}return new globalThis.Response(new globalThis.ReadableStream({async start(x){const $=c.body.getReader();if(b)b({percent:0,transferredBytes:0,totalBytes:h},new Uint8Array);async function C(){const{done:N,value:O}=await $.read();if(N){x.close();return}if(b){L+=O.byteLength;const F=h===0?0:L/h;b({percent:F,transferredBytes:L,totalBytes:h},O)}x.enqueue(O),await C()}await C()}}),{status:c.status,statusText:c.statusText,headers:c.headers})}}/*! MIT License Â© Sindre Sorhus */var K=(c)=>{const b=(h,L)=>W.create(h,Q(c,L));for(let h of _)b[h]=(L,x)=>W.create(L,Q(c,x,{method:h}));return b.create=(h)=>K(Q(h)),b.extend=(h)=>K(Q(c,h)),b.stop=I,b},d=K(),k=d;class E{localeObject;constructor(c){this.localeObject=c}translate(c,b){return this.localeObject?.[c]?.replace(/{(.*?)}/gi,(L,x)=>{return b?.[x]??""})??`TRANSLATION_ERROR: KEY "${c}"`}}class w{lockPromise;constructor(){this.lockPromise=void 0}get isLocked(){return!!this.lockPromise}wait(){return this.lockPromise?.promise||Promise.resolve()}lock(){let c;const b=new Promise((h)=>{c=h});this.lockPromise={promise:b,resolve:c}}unlock(){this.lockPromise?.resolve(),this.lockPromise=void 0}}var y="https://cdn.fnlb.net";class A{localeClient;route;localeObject;loadLock=new w;constructor(c,b){this.localeClient=c,this.route=b}async createTranslator(){if(!this.localeObject&&!this.loadLock.isLocked)await this.load();else if(!this.localeObject)await this.loadLock.wait();if(!this.localeObject)throw new Error("Failed to load locale object.");return new E(this.localeObject)}async load(){if(!this.localeObject){this.loadLock.lock();const c=await k.get(`${y}/locales/${this.localeClient.scope}/${this.route}`).json();if(c)this.localeObject=c;this.loadLock.unlock()}}}class a{scope;contextCache={};constructor(c){this.scope=c}getContext(c){const b=this.contextCache[c];if(b)return b;const h=new A(this,c);return this.contextCache[c]=h,h}static transformToSupportedLocale(c){if(typeof c!=="string")return Y.Default;if(Object.values(Y).includes(c))return c;return Y.Default}}export{E as LocaleTranslator,A as LocaleContext,a as LocaleClient};
